!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.Laue={})}(this,function(t){"use strict";function n(t){return"function"==typeof t}function e(t){return Array.isArray(t)}function i(t){return null===t||void 0===t}function r(t){return!isNaN(t)}function a(t,n){for(var e in n)t[e]=n[e];return t}function o(t){return!t.some(i)}function s(){}function u(t,n){var e;return void 0===n&&(n=20),function(){for(var i=arguments.length,r=Array(i);i--;)r[i]=arguments[i];clearTimeout(e),e=setTimeout.apply(void 0,[t,n].concat(r))}}var l=Array.prototype.slice;function h(t){return function(){return t}}function c(t,n){if((r=t.length)>1)for(var e,i,r,a=1,o=t[n[0]],s=o.length;a<r;++a)for(i=o,o=t[n[a]],e=0;e<s;++e)o[e][1]+=o[e][0]=isNaN(i[e][1])?i[e][0]:i[e][1]}function f(t){for(var n=t.length,e=new Array(n);--n>=0;)e[n]=n;return e}function d(t,n){return t[n]}function p(t,n){if((s=t.length)>1)for(var e,i,r,a,o,s,u=0,l=t[n[0]].length;u<l;++u)for(a=o=0,e=0;e<s;++e)(r=(i=t[n[e]][u])[1]-i[0])>=0?(i[0]=a,i[1]=a+=r):r<0?(i[1]=o,i[0]=o+=r):i[0]=a}var y={props:{data:{type:Array,default:function(){return[]}},height:{type:Number,default:300},width:{type:Number,default:600},autoresize:Boolean,padding:{default:8,type:[Number,Array]},stacked:Boolean,colors:{default:function(){return["#3fb1e3","#6be6c1","#626c91","#a0a7e6","#c4ebad","#96dee8"]},type:[Array,Function]},textColor:{type:String,default:"#999"}},computed:{offset:function(){for(var t=this.padding,i=this.space,r=[],a=0;a<4;a++){var o=e(t)?t[a]||0:t,s=i[a];r[a]=n(o)?o(s):s+o}return r},viewWidth:function(){var t=this.parentWidth,n=this.width;return i(t)?n:t},canvas:function(){var t=this.viewWidth,n=this.height,e=this.offset,i=e[3],r=e[0],a=n-e[2],o=t-e[1];return{x0:i,y0:r,width:o-i,height:a-r,x1:o,y1:a}},curData:function(){return function(){var t=h([]),n=f,e=c,i=d;function r(r){var a,o,s=t.apply(this,arguments),u=r.length,l=s.length,h=new Array(l);for(a=0;a<l;++a){for(var c,f=s[a],d=h[a]=new Array(u),p=0;p<u;++p)d[p]=c=[0,+i(r[p],f,p,r)],c.data=r[p];d.key=f}for(a=0,o=n(h);a<l;++a)h[o[a]].index=a;return e(h,o),h}return r.keys=function(n){return arguments.length?(t="function"==typeof n?n:h(l.call(n)),r):t},r.value=function(t){return arguments.length?(i="function"==typeof t?t:h(+t),r):i},r.order=function(t){return arguments.length?(n=null==t?f:"function"==typeof t?t:h(l.call(t)),r):n},r.offset=function(t){return arguments.length?(e=null==t?c:t,r):e},r}().keys(this.props).offset(this.stacked?p:s)(this.data)}},provide:function(){return{Plane:this}},methods:{genColor:function(t){var n=this.colors;return e(n)?n[t%n.length]:n(t)},resize:function(){var t=this.$el.getBoundingClientRect().width;this.parentWidth=t},addSpace:function(t){var n=this;void 0===t&&(t=[]),t.forEach(function(t,e){n.space[e]=Math.max(t,n.space[e]||0)})}},data:function(){return{space:[0,0,0,0],parentWidth:null,props:[],store:{}}},mounted:function(){this.autoresize&&(this.resize(),window.addEventListener("resize",u(this.resize)))}},v=Math.sqrt(50),x=Math.sqrt(10),m=Math.sqrt(2);function g(t,n,e){var i;n<t&&(t=(i=[n,t])[0],n=i[1]);for(var r=function(t,n,e){var i=Math.abs(n-t)/Math.max(0,e),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),a=i/r;return a>=v?r*=10:a>=x?r*=5:a>=m&&(r*=2),n<t?-r:r}(t,n,e),a=Math.floor(t/r)*r,o=[a],s=a;s<n;)s+=r,o.push(s);return Math.abs(t-o[1])<r&&(o.shift(),o[0]=t),Math.abs(n-o[o.length-2])<r&&(o.pop(),o[o.length-1]=n),o}function _(t,n,e){return Math[n].apply(Math,t.map(function(t){return Math[n].apply(Math,t.map(function(t){return t[e]}).filter(r))}))}var b={name:"LaCartesian",mixins:[y],props:{bound:{type:Array,default:function(){return[]}},narrow:[Boolean,Number,Function],distance:{default:0,type:Number}},computed:{high:function(){return this.getBound(this.bound[1],"max")},low:function(){return this.getBound(this.bound[0],"min")},len:function(){return this.data.length},tempXRatio:function(){var t=this.len;return t<=1?0:this.canvas.width/(t-1)},gap:function(){var t=this.narrow,e=this.tempXRatio;return n(t)?t(e):!0===t?e/2:Number(t)},xRatio:function(){return this.tempXRatio?this.tempXRatio-2*this.gap/(this.len-1):0},yRatio:function(){return this.canvas.height/(this.high-this.low)}},methods:{getBound:function(t,e){if("number"==typeof t)return t;var i="min"===e,r=_(this.curData,e,i?0:1);return i&&0===r&&(r=_(this.curData,"min",1)),n(t)?t(r):r}},render:function(t){var n=this,e=this.viewWidth,i=this.height,r=this.autoresize,a=this.$slots.default||[];this.snap={};var o=[],s=[],u=[],l=[],h=[];return a.forEach(function(t){var e=t.componentOptions;if(e){var i=e.Ctor.sealedOptions;if(i){var r=e.propsData,a=r.prop;switch(i.type){case"cartesian":a&&o.indexOf(a)<0&&o.push(a),t.index=s.length,s.push(t);break;case"object":n.addSpace(i.space),u.push(t);break;case"widget":l.push(t)}i.preload&&i.preload({data:r,parent:n,index:t.index})}}else h.push(t)}),this.props=o,t("div",{style:{position:"relative",width:r?"100%":e+"px"}},[t("svg",{attrs:{width:e,height:i,viewBox:"0 0 "+e+" "+i}},[h,s,u]),l])}},w={name:"LaPolar",mixins:[y],render:function(t){var n=this.viewWidth,e=this.height,i=this.autoresize,r=this.$slots.default||[];this.snap={};var a=[],o=[],s=[],u=[];return r.forEach(function(t){var n=t.componentOptions;if(n){var e=n.Ctor.sealedOptions;if(e){var i=n.propsData.prop;switch(e.type){case"polar":i&&a.indexOf(i)<0&&a.push(i),t.index=o.length,o.push(t);break;case"widget":s.push(t)}}}else u.push(t)}),this.props=a,t("div",{style:{position:"relative",width:i?"100%":n+"px"}},[t("svg",{attrs:{width:n,height:e,viewBox:"0 0 "+n+" "+e}},[u,o]),s])}},M={inject:["Plane"],computed:{store:function(){return this.Plane.store}}},A={props:{prop:String},mixins:[M],computed:{raws:function(){var t=this.prop,n=this.Plane;return t?n.data.map(function(n){return n[t]}):null},values:function(){var t=this.prop;return this.Plane.curData.filter(function(n){return n.key===t})[0]||[]}}},k={props:{animated:Boolean,animationDuration:{default:1,type:Number},animationEffect:{default:"ease",type:String},transition:String},computed:{trans:function(){return this.transition||(this.animated?"all "+this.animationDuration+"s "+this.animationEffect:"none")}}},S={mixins:[A,k],props:{points:Array,color:String,label:String,showValue:Boolean},computed:{id:function(){return this.$vnode.index},curColor:function(){return this.color||this.Plane.genColor(this.id)},actived:function(){var t=this.store.hidden;return!e(t)||t.indexOf(this.id)<0}},watch:{"store.activedIndex":function(t){var n=this.store;n.activedPoint=[].concat(n.activedPoint),this.$set(n.activedPoint,this.id,{color:this.curColor,value:this.raws[t],label:this.label})},curColor:{immediate:!0,handler:function(t){var n=this.store;n.colors=n.colors||{},this.$set(n.colors,this.id,t)}},label:{immediate:!0,handler:function(t){var n=this.store;n.labels=n.labels||{},this.$set(n.labels,this.id,t)}},props:{immediate:!0,handler:function(t){var n=this.store;n.props=n.props||{},i(this.id)||this.$set(n.props,this.id,t)}}}},P={mixins:[S],type:"cartesian",computed:{curPoints:function(){var t=this;if(this.points)return this.points;var n=this.Plane,e=n.gap,r=n.xRatio,a=n.yRatio,o=n.low,s=n.canvas,u=s.x0,l=s.y1;return this.values.map(function(n,s){var h;if(i(t.raws[s]))return[null];var c=n[0],f=n[1];c<0&&(f=(h=n)[0],c=h[1]),c=Math.max(o,c);var d=isNaN(f)?null:l-(f-o)*a,p=isNaN(c)?null:l-(c-o)*a;return[u+r*s+e,d,p]})},pointSlot:function(){var t=this,n=this.$scopedSlots.default,e=this.store.activedIndex;return n&&this.curPoints.map(function(i,r){return n({x:i[0],y:i[1],value:t.raws[r],index:r,actived:e===r,color:t.curColor,style:{transition:t.trans}})})}}},C=Math.PI,R=2*C,L=R-1e-6;function N(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function T(){return new N}function $(t){this._context=t}function I(t){return new $(t)}function E(t){return t[0]}function B(t){return t[1]}function X(){var t=E,n=B,e=h(!0),i=null,r=I,a=null;function o(o){var s,u,l,h=o.length,c=!1;for(null==i&&(a=r(l=T())),s=0;s<=h;++s)!(s<h&&e(u=o[s],s,o))===c&&((c=!c)?a.lineStart():a.lineEnd()),c&&a.point(+t(u,s,o),+n(u,s,o));if(l)return a=null,l+""||null}return o.x=function(n){return arguments.length?(t="function"==typeof n?n:h(+n),o):t},o.y=function(t){return arguments.length?(n="function"==typeof t?t:h(+t),o):n},o.defined=function(t){return arguments.length?(e="function"==typeof t?t:h(!!t),o):e},o.curve=function(t){return arguments.length?(r=t,null!=i&&(a=r(i)),o):r},o.context=function(t){return arguments.length?(null==t?i=a=null:a=r(i=t),o):i},o}function z(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function D(t,n){this._context=t,this._k=(1-n)/6}N.prototype=T.prototype={constructor:N,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,i){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+i)},bezierCurveTo:function(t,n,e,i,r,a){this._+="C"+ +t+","+ +n+","+ +e+","+ +i+","+(this._x1=+r)+","+(this._y1=+a)},arcTo:function(t,n,e,i,r){t=+t,n=+n,e=+e,i=+i,r=+r;var a=this._x1,o=this._y1,s=e-t,u=i-n,l=a-t,h=o-n,c=l*l+h*h;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(c>1e-6)if(Math.abs(h*s-u*l)>1e-6&&r){var f=e-a,d=i-o,p=s*s+u*u,y=f*f+d*d,v=Math.sqrt(p),x=Math.sqrt(c),m=r*Math.tan((C-Math.acos((p+c-y)/(2*v*x)))/2),g=m/x,_=m/v;Math.abs(g-1)>1e-6&&(this._+="L"+(t+g*l)+","+(n+g*h)),this._+="A"+r+","+r+",0,0,"+ +(h*f>l*d)+","+(this._x1=t+_*s)+","+(this._y1=n+_*u)}else this._+="L"+(this._x1=t)+","+(this._y1=n);else;},arc:function(t,n,e,i,r,a){t=+t,n=+n;var o=(e=+e)*Math.cos(i),s=e*Math.sin(i),u=t+o,l=n+s,h=1^a,c=a?i-r:r-i;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+u+","+l:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-l)>1e-6)&&(this._+="L"+u+","+l),e&&(c<0&&(c=c%R+R),c>L?this._+="A"+e+","+e+",0,1,"+h+","+(t-o)+","+(n-s)+"A"+e+","+e+",0,1,"+h+","+(this._x1=u)+","+(this._y1=l):c>1e-6&&(this._+="A"+e+","+e+",0,"+ +(c>=C)+","+h+","+(this._x1=t+e*Math.cos(r))+","+(this._y1=n+e*Math.sin(r))))},rect:function(t,n,e,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +i+"h"+-e+"Z"},toString:function(){return this._}},$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}},D.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:z(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:z(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var O=function t(n){function e(t){return new D(t,n)}return e.tension=function(n){return t(+n)},e}(0),W={name:"ElTrans",functional:!0,props:["from","trans"],render:function(t,n){var e=n.children,i=n.props;return t("transition",{props:{appear:!0},on:{beforeAppear:function(t){for(var n in i.from){var e=i.from[n],r=t.getAttribute(n);t.setAttribute("data-"+n,r),t.setAttribute(n,e)}},appear:function(t){setTimeout(function(){for(var n in t.style.transition=i.trans,t.style.WebkitTransition=i.trans,t.style.msTransition=i.trans,t.style.MozTransition=i.trans,i.from){var e=t.getAttribute("data-"+n);t.setAttribute(n,e),t.removeAttribute("data-"+n)}})}}},e)}},Y={name:"LaMotionSpread",functional:!0,props:["axis","transition"],render:function(t,n){var e=n.children,i=n.props,r="la-spread-"+n.parent._uid,a=i.axis,o=i.transition;return t("g",[t("defs",[t("clipPath",{attrs:{id:r}},[t(W,{props:{from:{width:"x"===a?0:"100%",height:"y"===a?0:"100%"},trans:o}},[t("rect",{attrs:{x:0,y:0,width:"100%",height:"100%"}})])])]),t("g",{attrs:{"clip-path":"url(#"+r+")"}},e)])}},q={props:{dashed:[Boolean,String]},computed:{curDashed:function(){var t=this.dashed;return!0===t||""===t?3:!1===t?"none":t}}},F={name:"LaLine",mixins:[P,q],props:{curve:[Boolean,Function],dot:Boolean,width:{type:Number,default:1},hideLine:Boolean,continued:Boolean},computed:{draw:function(){var t=this.curve,e=this.continued,i=X().defined(o);return t&&i.curve(n(t)?t:O),function(t){return t=e?t.filter(o):t,i(t)}},valueSlot:function(){var t=this,n=this.$createElement;return this.showValue&&n("g",{attrs:{fill:this.curColor}},this.curPoints.map(function(e,i){return n("text",{attrs:{x:e[0],y:e[1],dy:"-0.31em","text-anchor":"middle"}},t.raws[i])}))}},render:function(t){var n=this,e=n.animated,i=n.width,r=n.curPoints,a=n.curColor,o=n.hideLine,s=n.trans,u=n.valueSlot,l=n.pointSlot,h=n.store;if(!n.actived)return null;var c=[!o&&t("path",{attrs:{stroke:a,fill:"none","stroke-width":i,d:this.draw(r)},style:{"stroke-dasharray":this.curDashed,transition:s}}),this.$slots.default,this.dot&&t("g",{attrs:{stroke:"#fff",fill:a}},r.map(function(n,e){return n[1]&&t("circle",{attrs:{cx:n[0],cy:n[1],r:(e===h.activedIndex?2:0)+(r=i,parseInt(r,10))+1},style:{transition:s}});var r})),u,l];return e?t(Y,{props:{axis:"x",transition:s}},c):t("g",c)}};var V={name:"LaArea",mixins:[F],props:{fillColor:String},computed:{draw:function(){var t=this.curve,e=this.continued,i=function(){var t=E,n=null,e=h(0),i=B,r=h(!0),a=null,o=I,s=null;function u(u){var l,h,c,f,d,p=u.length,y=!1,v=new Array(p),x=new Array(p);for(null==a&&(s=o(d=T())),l=0;l<=p;++l){if(!(l<p&&r(f=u[l],l,u))===y)if(y=!y)h=l,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),c=l-1;c>=h;--c)s.point(v[c],x[c]);s.lineEnd(),s.areaEnd()}y&&(v[l]=+t(f,l,u),x[l]=+e(f,l,u),s.point(n?+n(f,l,u):v[l],i?+i(f,l,u):x[l]))}if(d)return s=null,d+""||null}function l(){return X().defined(r).curve(o).context(a)}return u.x=function(e){return arguments.length?(t="function"==typeof e?e:h(+e),n=null,u):t},u.x0=function(n){return arguments.length?(t="function"==typeof n?n:h(+n),u):t},u.x1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:h(+t),u):n},u.y=function(t){return arguments.length?(e="function"==typeof t?t:h(+t),i=null,u):e},u.y0=function(t){return arguments.length?(e="function"==typeof t?t:h(+t),u):e},u.y1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:h(+t),u):i},u.lineX0=u.lineY0=function(){return l().x(t).y(e)},u.lineY1=function(){return l().x(t).y(i)},u.lineX1=function(){return l().x(n).y(e)},u.defined=function(t){return arguments.length?(r="function"==typeof t?t:h(!!t),u):r},u.curve=function(t){return arguments.length?(o=t,null!=a&&(s=o(a)),u):o},u.context=function(t){return arguments.length?(null==t?a=s=null:s=o(a=t),u):a},u}().y0(function(t){return t[2]}).defined(o);return t&&i.curve(n(t)?t:O),function(t){return t=e?t.filter(o):t,i(t)}},areaId:function(){return"la-area-"+this._uid+"-"+this.id},curFillColor:function(){return this.fillColor||"url(#"+this.areaId+")"}},render:function(t){var n=this.trans,e=this.curPoints,i=this.curColor,r=this.curFillColor;return this.actived?t("g",[!this.fillColor&&t("defs",[t("linearGradient",{domProps:{id:this.areaId}},[t("stop",{attrs:{"stop-color":i,"stop-opacity":.5}})])]),t(F,{props:a(a({},this.$props),{color:i,points:e,transition:n}),scopedSlots:this.$scopedSlots},[t("path",{attrs:{d:this.draw(e),fill:r},style:{transition:n}}),this.$slots.default])]):null}},j={name:"LaBar",mixins:[P],props:{width:{type:Number,default:20}},preload:function(t){var n=t.data,e=t.parent,i=t.index,r=e.snap,a=e.distance,o=n.width||20;r.barMap=[].concat(r.barMap,i),r.barAllWidth=r.barAllWidth||0,r.barOffset=[].concat(r.barOffset,r.barAllWidth),r.barAllWidth+=o+a},computed:{margin:function(){var t=this.id,n=this.width,e=this.Plane,i=e.snap,r=e.distance,a=e.stacked,o=i.barMap.indexOf(t);return a?-n/2:i.barOffset[o]-(i.barAllWidth-r)/2},valueSlot:function(){var t=this,n=this.$createElement;return this.showValue&&n("g",{attrs:{fill:"#fff"}},this.curPoints.map(function(e,i){return n("text",{attrs:{x:e[0]+t.margin+t.width/2,y:e[2]+(e[1]-e[2])/2,dy:"0.31em","text-anchor":"middle"}},t.raws[i])}))}},methods:{getRect:function(t){var n=t[2]-t[1];return this.$createElement("rect",{attrs:{x:t[0]+this.margin,y:n<0?t[2]:t[1],width:this.width,height:Math.abs(n)}})}},render:function(t){var n=this,e=this.curPoints,i=this.curColor,r=this.animated,a=this.trans,o=this.pointSlot,s=this.valueSlot;if(!this.actived)return null;var u=[];return u=r?e.map(function(e){return t(W,{props:{from:{height:0,y:n.Plane.canvas.y1},trans:a}},[n.getRect(e)])}):e.map(this.getRect),t("g",{attrs:{fill:i}},[].concat(u,s,o))}},G={type:"polar",mixins:[S]};function Z(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}function Q(t){return t}var H=Math.abs,J=Math.atan2,K=Math.cos,U=Math.max,tt=Math.min,nt=Math.sin,et=Math.sqrt,it=1e-12,rt=Math.PI,at=rt/2,ot=2*rt;function st(t){return t>=1?at:t<=-1?-at:Math.asin(t)}function ut(t){return t.innerRadius}function lt(t){return t.outerRadius}function ht(t){return t.startAngle}function ct(t){return t.endAngle}function ft(t){return t&&t.padAngle}function dt(t,n,e,i,r,a,o){var s=t-e,u=n-i,l=(o?a:-a)/et(s*s+u*u),h=l*u,c=-l*s,f=t+h,d=n+c,p=e+h,y=i+c,v=(f+p)/2,x=(d+y)/2,m=p-f,g=y-d,_=m*m+g*g,b=r-a,w=f*y-p*d,M=(g<0?-1:1)*et(U(0,b*b*_-w*w)),A=(w*g-m*M)/_,k=(-w*m-g*M)/_,S=(w*g+m*M)/_,P=(-w*m+g*M)/_,C=A-v,R=k-x,L=S-v,N=P-x;return C*C+R*R>L*L+N*N&&(A=S,k=P),{cx:A,cy:k,x01:-h,y01:-c,x11:A*(r/b-1),y11:k*(r/b-1)}}function pt(){var t=ut,n=lt,e=h(0),i=null,r=ht,a=ct,o=ft,s=null;function u(){var u,l,h,c=+t.apply(this,arguments),f=+n.apply(this,arguments),d=r.apply(this,arguments)-at,p=a.apply(this,arguments)-at,y=H(p-d),v=p>d;if(s||(s=u=T()),f<c&&(l=f,f=c,c=l),f>it)if(y>ot-it)s.moveTo(f*K(d),f*nt(d)),s.arc(0,0,f,d,p,!v),c>it&&(s.moveTo(c*K(p),c*nt(p)),s.arc(0,0,c,p,d,v));else{var x,m,g=d,_=p,b=d,w=p,M=y,A=y,k=o.apply(this,arguments)/2,S=k>it&&(i?+i.apply(this,arguments):et(c*c+f*f)),P=tt(H(f-c)/2,+e.apply(this,arguments)),C=P,R=P;if(S>it){var L=st(S/c*nt(k)),N=st(S/f*nt(k));(M-=2*L)>it?(b+=L*=v?1:-1,w-=L):(M=0,b=w=(d+p)/2),(A-=2*N)>it?(g+=N*=v?1:-1,_-=N):(A=0,g=_=(d+p)/2)}var $=f*K(g),I=f*nt(g),E=c*K(w),B=c*nt(w);if(P>it){var X=f*K(_),z=f*nt(_),D=c*K(b),O=c*nt(b);if(y<rt){var W=M>it?function(t,n,e,i,r,a,o,s){var u=e-t,l=i-n,h=o-r,c=s-a,f=(h*(n-a)-c*(t-r))/(c*u-h*l);return[t+f*u,n+f*l]}($,I,D,O,X,z,E,B):[E,B],Y=$-W[0],q=I-W[1],F=X-W[0],V=z-W[1],j=1/nt(((h=(Y*F+q*V)/(et(Y*Y+q*q)*et(F*F+V*V)))>1?0:h<-1?rt:Math.acos(h))/2),G=et(W[0]*W[0]+W[1]*W[1]);C=tt(P,(c-G)/(j-1)),R=tt(P,(f-G)/(j+1))}}A>it?R>it?(x=dt(D,O,$,I,f,R,v),m=dt(X,z,E,B,f,R,v),s.moveTo(x.cx+x.x01,x.cy+x.y01),R<P?s.arc(x.cx,x.cy,R,J(x.y01,x.x01),J(m.y01,m.x01),!v):(s.arc(x.cx,x.cy,R,J(x.y01,x.x01),J(x.y11,x.x11),!v),s.arc(0,0,f,J(x.cy+x.y11,x.cx+x.x11),J(m.cy+m.y11,m.cx+m.x11),!v),s.arc(m.cx,m.cy,R,J(m.y11,m.x11),J(m.y01,m.x01),!v))):(s.moveTo($,I),s.arc(0,0,f,g,_,!v)):s.moveTo($,I),c>it&&M>it?C>it?(x=dt(E,B,X,z,c,-C,v),m=dt($,I,D,O,c,-C,v),s.lineTo(x.cx+x.x01,x.cy+x.y01),C<P?s.arc(x.cx,x.cy,C,J(x.y01,x.x01),J(m.y01,m.x01),!v):(s.arc(x.cx,x.cy,C,J(x.y01,x.x01),J(x.y11,x.x11),!v),s.arc(0,0,c,J(x.cy+x.y11,x.cx+x.x11),J(m.cy+m.y11,m.cx+m.x11),v),s.arc(m.cx,m.cy,C,J(m.y11,m.x11),J(m.y01,m.x01),!v))):s.arc(0,0,c,w,b,v):s.lineTo(E,B)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var e=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,i=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-rt/2;return[K(i)*e,nt(i)*e]},u.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:h(+n),u):t},u.outerRadius=function(t){return arguments.length?(n="function"==typeof t?t:h(+t),u):n},u.cornerRadius=function(t){return arguments.length?(e="function"==typeof t?t:h(+t),u):e},u.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:h(+t),u):i},u.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:h(+t),u):r},u.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:h(+t),u):a},u.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:h(+t),u):o},u.context=function(t){return arguments.length?(s=null==t?null:t,u):s},u}var yt={name:"LaMotionCircle",functional:!0,props:["r","transition"],render:function(t,n){var e=n.children,i=n.props,r="la-circle-"+n.parent._uid,a=i.transition;return t("g",[t("defs",[t("clipPath",{attrs:{id:r}},[t(W,{props:{from:{r:0},trans:a}},[t("circle",{attrs:{r:1.5*i.r}})])])]),t("g",{attrs:{"clip-path":"url(#"+r+")"}},e)])}},vt={name:"LaPie",mixins:[G],props:{translate:{type:[String,Array],default:function(){return["50%","50%"]}},radius:{type:[Number,Array],default:function(){return[0,100]}},angles:{type:[Number,Array],default:function(){return[0,2*Math.PI]}},showLabel:Boolean,labelProp:{type:String,default:"label"}},computed:{arcs:function(){return function(){var t=Q,n=Z,e=null,i=h(0),r=h(ot),a=h(0);function o(o){var s,u,l,h,c,f=o.length,d=0,p=new Array(f),y=new Array(f),v=+i.apply(this,arguments),x=Math.min(ot,Math.max(-ot,r.apply(this,arguments)-v)),m=Math.min(Math.abs(x)/f,a.apply(this,arguments)),g=m*(x<0?-1:1);for(s=0;s<f;++s)(c=y[p[s]=s]=+t(o[s],s,o))>0&&(d+=c);for(null!=n?p.sort(function(t,e){return n(y[t],y[e])}):null!=e&&p.sort(function(t,n){return e(o[t],o[n])}),s=0,l=d?(x-f*g)/d:0;s<f;++s,v=h)u=p[s],h=v+((c=y[u])>0?c*l:0)+g,y[u]={data:o[u],index:s,value:c,startAngle:v,endAngle:h,padAngle:m};return y}return o.value=function(n){return arguments.length?(t="function"==typeof n?n:h(+n),o):t},o.sortValues=function(t){return arguments.length?(n=t,e=null,o):n},o.sort=function(t){return arguments.length?(e=t,n=null,o):e},o.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:h(+t),o):i},o.endAngle=function(t){return arguments.length?(r="function"==typeof t?t:h(+t),o):r},o.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:h(+t),o):a},o}().startAngle(this.curAngles[0]).endAngle(this.curAngles[1]).sortValues(s)(this.raws)},curRadius:function(){var t=this.radius;return e(t)?t:[0,t]},curAngles:function(){var t=this.angles;return e(t)?t:[0,t]},draw:function(){return pt().innerRadius(this.curRadius[0]).outerRadius(this.curRadius[1])},drawText:function(){return pt().innerRadius(.7*this.curRadius[1]).outerRadius(.7*this.curRadius[1])},valueSlot:function(){var t=this;if(this.showValue){var n=this.$createElement;return this.arcs.map(function(e,i){var r=t.drawText.centroid(e);return n("text",{attrs:{x:r[0],y:r[1],fill:"#fff","text-anchor":"middle"}},t.raws[i])})}},labels:function(){var t=this.labelProp,n=this.Plane;return t?n.data.map(function(n){return n[t]}):null},labelSlot:function(){var t=this;if(this.showLabel){var n=this.$createElement;return this.arcs.map(function(e,i){var r=t.drawText.centroid(e);return n("text",{attrs:{x:.95*r[0]<<1,y:.95*r[1]<<1,fill:"#000","text-anchor":"middle"}},t.labels[i])})}}},render:function(t){var n=this,e=this.Plane.genColor,i=this.animated,r=this.arcs,a=this.draw,o=r.map(a).map(function(n,i){return t("path",{attrs:{d:n,fill:e(i),stroke:"#fff"}})}),s=this.$scopedSlots.default,u=s&&r.map(function(t,e){var i=n.drawText.centroid(t);return s({arc:t,index:e,x:i[0],y:i[1],style:{transition:n.trans}})}),l=[].concat(o,this.valueSlot,this.labelSlot,u),h={style:{transform:"translate("+this.translate+")"}};return t("g",h,i?[t(yt,{props:{transition:this.trans,r:this.curRadius[1]}},l)]:l)}},xt={mixins:[M],props:{color:String},type:"object",computed:{curColor:function(){return this.color||this.Plane.textColor}}},mt={props:{color:String,tickSize:{type:Number,default:5},fontSize:{type:Number,default:15},format:Function,gridline:Boolean,gridlineInterval:[Function,Number],interval:[Function,Number]},mixins:[xt,A,q],computed:{isX:function(){return"x"===this.$options.axis},labels:function(){var t=this.raws,n=this.Plane,e=n.len;return t=this.isX?t||Array.apply(null,{length:e}).map(function(t,n){return n+1}):g(n.low,n.high,e)},gap:function(){return this.isX?this.Plane.gap:0},points:function(){var t,n=this.Plane,e=this.isX,i=this.labels,r=this.inverse,a=this.gap,o=n.canvas,s=o.x0,u=o.y0,l=o.y1,h=o.width,c=o.height;if(e){var f=n.xRatio,d=u+(r?0:c);t=i.map(function(t,n){return[s+f*n+a,d]})}else{var p=n.yRatio,y=n.low,v=s+(r?h:0);t=i.map(function(t){return[v,l-(t-y)*p]})}return t},curColor:function(){return this.color||this.Plane.textColor},handleInterval:function(){var t=this.interval;return"number"==typeof t?function(n){return n%t==0}:n(t)?t:void 0},handleGridlineInterval:function(){var t=this.gridlineInterval;return"number"==typeof t?function(n){return n%t==0}:n(t)?t:void 0}},watch:{"store.activedIndex":function(t){this.isX&&this.$set(this.store,"activedLabel",this.labels[t])}},render:function(t){var e=this,i=this,r=i.points,a=i.labels,o=i.tickSize,s=i.fontSize,u=i.curColor,l=i.isX,h=i.format,c=i.inverse,f=i.gap,d=i.Plane,p=i.store,y=r[0],v=r[r.length-1],x=this.$scopedSlots.default,m=(c?-1:1)*o,g=(l?1:0)*m,_=(l?0:1)*m,b=l?"middle":c?"start":"end",w=l?c?.71-1:.71:.355,M=1.5*(l?m:0),A=1.5*(l?0:m),k=a.map(function(i,a){var s=r[a];return!(e.handleInterval&&!e.handleInterval(a))&&t("g",[o&&t("line",{attrs:{x1:s[0]-_,x2:s[0],y1:s[1]+g,y2:s[1],stroke:u}}),t("text",{attrs:{x:s[0]-A,y:s[1]+M,dy:w+"em",stroke:"none"}},x?x({value:i}):n(h)?h(i):i)])}).filter(Boolean);return t("g",{attrs:{stroke:u}},[t("line",{attrs:{x2:v[0]+f,y2:v[1],x1:y[0]-f,y1:y[1]}}),[t("g",{attrs:{"text-anchor":b,"font-size":s,fill:u,stroke:"none"}},k)].concat(this.gridline&&r.reduce(function(n,i,r){return e.handleGridlineInterval&&!e.handleGridlineInterval(r)||n.push(t("line",{attrs:{x1:i[0],y1:i[1],x2:l?i[0]:d.canvas.x1,y2:l?d.canvas.y0:i[1]},style:{opacity:l&&p.activedIndex===r?1:.3,"stroke-dasharray":e.curDashed}})),n},[]))])}},gt={name:"LaXAxis",axis:"x",space:[0,20,24,20],mixins:[mt]},_t={name:"LaYAxis",axis:"y",space:[10,0,0,40],mixins:[mt]},bt={name:"LaXAxisInverse",space:[24,20,0,20],beforeCreate:function(){this.inverse=!0},mixins:[gt]},wt={name:"LaYAxisInverse",space:[10,40,0,0],beforeCreate:function(){this.inverse=!0},mixins:[_t]},Mt={name:"LaYMarker",mixins:[xt,q],props:{label:String,value:Number,placement:{type:String,default:"end"}},computed:{point:function(){var t=this.Plane,n=t.yRatio,e=t.low,i=t.canvas,r=i.x0,a=i.y1,o=i.x1,s=a-(this.value-e)*n;return{x1:r,y1:s,y2:s,x2:o}}},render:function(t){var n=this.point,e=this.curColor,i=this.curDashed,r=this.label,a=this.placement;return t("g",[t("line",{attrs:n,style:{stroke:e,"stroke-dasharray":i}}),r&&t("text",{attrs:{fill:e,x:"end"===a?n.x2:"start"===a?n.x1:(n.x2-n.x1)/2+n.x1,y:n.y1,dy:"-0.31em","text-anchor":a}},r)])}},At={name:"LaYRegion",mixins:[xt,q],props:{label:String,low:{type:Number,required:!0},high:{type:Number,required:!0},fillColor:String,placement:{type:String,default:"end"}},computed:{point:function(){var t=this.Plane,n=t.yRatio,e=t.low,i=t.canvas,r=i.x0,a=i.y1,o=i.width;return{x:r,y:a-(this.high-e)*n,height:(this.high-this.low)*n,width:o}},fillAttr:function(){var t=this.fillColor;return t?{fill:t,stroke:this.curColor}:{stroke:this.curColor,opacity:.3}}},render:function(t){var n=this.label,e=this.point,i=this.placement,r=this.fillAttr;if(!(this.high<this.low))return t("g",{attrs:{fill:this.curColor}},[t("rect",{attrs:a(r,e),style:{"stroke-dasharray":this.curDashed}}),n&&t("text",{attrs:{x:"end"===i?e.x+e.width:"start"===i?e.x:e.width/2+e.x,y:e.y,dy:"-0.31em","text-anchor":i}},n)])}},kt={type:"widget",mixins:[M]},St={name:"LaTooltip",mixins:[kt,k],props:{animationDuration:{default:.5,type:Number}},data:function(){return{left:0,top:0,show:!1}},methods:{handleMove:function(t){var n=t.x,e=t.y,i=this.Plane,r=i.$el.getBoundingClientRect(),a=this.$el.getBoundingClientRect(),o=e-r.y,s=n-r.x-this.offsetX,u=Math.round(s/i.xRatio),l=i.canvas.x1-a.width,h=i.canvas.y1-a.height;o>=i.canvas.y0&&o<=i.canvas.y1?u>-1&&u<i.len&&(this.left=Math.min(u*i.xRatio+this.offsetX+10,l),this.$set(this.store,"activedIndex",u),this.top=Math.min(o+10,h),this.show=!0):this.handleLeave()},handleLeave:function(){this.show=!1,this.$set(this.store,"activedIndex",null)}},computed:{offsetX:function(){var t=this.Plane;return t.canvas.x0+t.gap}},mounted:function(){var t=this,n=this.Plane.$el;n.addEventListener("mousemove",u(this.handleMove,10)),n.addEventListener("mouseleave",this.handleLeave),n.addEventListener("touchmove",function(n){var e=n.touches[0];t.handleMove({x:e.clientX,y:e.clientY})},{passive:!0})},render:function(t){var n=this.store,e=n.activedLabel,i=n.activedPoint;void 0===i&&(i=[]);var r=n.activedIndex,a=this.$scopedSlots.default,o=a?a({label:e,actived:i,index:r}):t("div",{style:{background:"#00000095",padding:"8px",color:"#fff",borderRadius:"4px"}},[t("div",{style:{marginBottom:".5em"}},e),i.map(function(n){return t("div",[t("span",{style:{backgroundColor:n.color,height:"10px",width:"10px",borderRadius:"50%",display:"inline-block",marginRight:"5px"}}),n.label&&t("span",{style:{marginRight:"5px"}},n.label+":"),t("span",n.value)])})]);return t("div",{class:"la-tooltip",style:{position:"absolute",top:0,transform:"translate("+this.left+"px, "+this.top+"px)",transition:this.trans,opacity:Number(this.show)}},[o])}},Pt={name:"LaLegend",mixins:[kt],props:{selectable:Boolean,placement:{type:String,default:"bottom"},color:String},preload:function(t){var n=t.data,e=t.parent,i=n.placement;void 0===i&&(i="bottom");var r=[0,0,0,0];switch(i.match(/^(\w+)-?/)[1]){case"bottom":r[2]=50;break;case"top":r[0]=50;break;case"left":r[3]=100;break;case"right":r[1]=100}e.addSpace(r)},computed:{curColor:function(){return this.color||this.Plane.textColor},position:function(){return this.placement.match(/^(\w+)(-(\w+))?$/)[1]},align:function(){return this.placement.match(/^(\w+)(-(\w+))?$/)[3]},pos:function(){var t=this.position,n=this.align,e={};if("top"===t||"bottom"===t){switch(n){case"start":e.left=0;break;case"end":e.right=0;break;default:e.left="50%",e.transform="translateX(-50%)"}"top"===t?e.top=0:e.bottom=0}else{switch(n){case"start":e.top=0;break;case"end":e.bottom=0;break;default:e.top="50%",e.transform="translateY(-50%)"}"left"===t?e.left=0:e.right=0}return e}},created:function(){this.$set(this.store,"hidden",[])},render:function(t){var n=this.curColor,e=this.pos,i=this.position,r=this.selectable,o=this.store,s=o.hidden,u=this.$scopedSlots.default;return t("div",{class:"la-legend",style:a({position:"absolute"},e)},Object.keys(o.props).map(function(e){return t("div",{style:{display:"left"===i||"right"===i?"block":"inline-block",marginRight:"10px",marginLeft:"5px",color:n,cursor:r?"pointer":"nromal"},on:{click:function(){if(r){e=Number(e);var t=s.indexOf(e);t<0?s.push(e):s.splice(t,1)}}}},u?u({color:o.colors[e],label:o.labels[e],prop:o.props[e]}):[t("span",{style:{backgroundColor:o.colors[e],height:"10px",width:"10px",borderRadius:"50%",display:"inline-block",marginRight:"5px"}}),t("span",{style:s.indexOf(Number(e))>-1?{textDecoration:"line-through"}:{}},o.labels[e])])}))}};function Ct(t){[b,w,F,V,j,vt,gt,_t,bt,wt,St,Pt,Mt,At].forEach(function(n){t.component(n.name,n)})}void 0!==window.Vue&&window.Vue.use(Ct),t.Laue=Ct,t.Cartesian=b,t.Polar=w,t.Line=F,t.Area=V,t.Bar=j,t.Pie=vt,t.XAxis=gt,t.YAxis=_t,t.XAxisInverse=bt,t.YAxisInverse=wt,t.Tooltip=St,t.Legend=Pt,t.YMarker=Mt,t.YRegion=At,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=laue.umd.js.map
